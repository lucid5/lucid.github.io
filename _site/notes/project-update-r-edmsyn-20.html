<script type="text/javascript" async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"> </script> <!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Educational Data Synthesizer - edmsyn the second part</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@" /><meta name="twitter:title" content="Educational Data Synthesizer - edmsyn the second part" /><meta name="twitter:description" content="IntroThis is the follow-up post on my R package edmsyn. See the debut here. This is also to mark that a working commit of edmsyn 2.0 is published. But first, let me real quick just admit something ..."><meta name="description" content="IntroThis is the follow-up post on my R package edmsyn. See the debut here. This is also to mark that a working commit of edmsyn 2.0 is published. But first,..."><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"><link rel="icon" href="/assets/favicon.png"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link rel="canonical" href="/notes/project-update-r-edmsyn-20"><link rel="alternate" type="application/atom+xml" title="thtrieu" href="/feed.xml" /></head><body><aside class="logo"> <a href="/"> <img src="http://i.imgur.com/tU08Pu4.gif" id = "logo" onmouseover = "thatLogo()" onmouseout = "thisLogo()" onmouseup = "clicked()" class= "gravatar"> </a></aside><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1 onmouseover="buttonLogo()" onmouseout = "thisLogo()"><a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#116;&#104;&#116;&#114;&#105;&#101;&#117;&#064;&#097;&#112;&#099;&#115;&#046;&#118;&#110;" target = "_blank"><img src="http://i.imgur.com/CKLpgcs.png (email icon with padding)" alt="alt text" /></a>     <a href="http://github.com/thtrieu/" target = "_blank"><img src="http://i.imgur.com/aV59QS6.png (github icon with padding)" alt="alt text" /></a>     <a href="https://linkedin.com/in/trinhhtrieu" target = "_blank"><img src="http://i.imgur.com/Q9Dr6XJ.png (linkedin icon with padding)" alt="alt text" /></a>     <a href="http://thtrieu.github.io/resume.pdf" target = "_blank"><img src="http://i.imgur.com/2amdaUm.png (resume icon with padding)" alt="alt text" /></a>     <a href="#share"><img src="http://i.imgur.com/GE4GmC3.png (share icon with padding)" alt="alt text" /></a></h1><time>April 30, 2016 - just another day in heaven</time></div><!--<div class="divider"></div>--><p>&nbsp;</p><p></p><h3 id="intro">Intro</h3><p>This is the follow-up post on my R package <code class="highlighter-rouge">edmsyn</code>. See the debut <a href="http://thtrieu.github.io/2015/09/21/project-debut-r-package-educational-data-synthesizer">here</a>. This is also to mark that a working commit of <code class="highlighter-rouge">edmsyn 2.0</code> is published. But first, let me real quick just admit something extremely awkward: the version number <code class="highlighter-rouge">2.0</code> right there may have been <code class="highlighter-rouge">5.0</code> or <code class="highlighter-rouge">6.0</code> if I figure out the way to change it earlier (yeah, you just jump right into the package description and change the freakin number, but it took me until now to do so). But hey, this turned out to be a blessing in disguise, no software should upgrade itself that fast unless it did substantially evolve, which is not the case for <code class="highlighter-rouge">edmsyn</code>, so <code class="highlighter-rouge">2.0</code> is just what I need.</p><p>For a fun read on some interesting things I learnt and solved during this build, go <a href="http://thtrieu.github.io/2016/03/31/r-environment-and-scope-modify-list-of-funcs">here</a>. Must say, the building process for this is probably amongst the most fun I had for a recent while.</p><h3 id="the-addition">The addition</h3><p>Earlier in the debut post I wrote about working the package to beyond the point of being merely an interface to various specialised <code class="highlighter-rouge">R</code> packages. So what is it that I added into the source code to make it becomes more than just an interface? The answer is: the package is now not just a window for users to efficiently communicate with various packages at once, it also allow users to modify into the internal structure as well as adding their own content into it. And of course, the <strong>two magic words</strong>, what makes <code class="highlighter-rouge">edmsyn</code> what it is, (from the dedut post) will work just fine on this new content.</p><p>Here is a relevant quote from the formal documentation:</p><blockquote><p><code class="highlighter-rouge">edmsyn</code> comes with a pre-defined set of parameters and relationships amongst themselves. These relationships are rules that help <code class="highlighter-rouge">edmsyn</code> derive values for one or more parameters from some others. Specifically, these rules are represented as functions in the package. For example, a function that takes two integers and randomly produce a binary matrix with its dimensions being the two inputted integers can be used as the rule to derive <code class="highlighter-rouge">M</code> (skill mastery matrix) from <code class="highlighter-rouge">students</code> and <code class="highlighter-rouge">concepts</code>. Rules that derive value for “data parameter” such as <code class="highlighter-rouge">poks</code>, <code class="highlighter-rouge">dina</code>, or <code class="highlighter-rouge">dino</code> encode POKS, DINA, DINO models respectively. Similarly, rules that derive value in the opposite direction encode the corresponding learning algorithms.</p></blockquote><blockquote><p>The choice of built-in parameters, models, and learning algorithms is made independently at the time of development for <code class="highlighter-rouge">edmsyn</code> and thus, it may or may not satisfy users’ need. That is why <code class="highlighter-rouge">edmsyn</code> also comes with a set of tools that allow its users to re-define all these components to the extent of building a whole new set of parameters and models, while still retaining all the original benefits that it offers.</p></blockquote><p>Yes, at the end of the day, all attempts are made for the package to become more practically useful to users. Being more flexible and change-welcoming is probably the number one principle.</p><h3 id="can-we-just-now-do-something-already">Can we just now do something already?</h3><p>Alright of course that is what we are going to do now. But everything takes time, you first need to get a refresh with the <strong>actual</strong> syntax of <code class="highlighter-rouge">edmsyn</code> before going any further, what I introduced in the debut is not exactly the one built in the package. In fact, what was actually built is not that different except for some function/variable names. See below</p><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">edmsyn</span><span class="p">)</span><span class="w">
</span><span class="c1"># 1. To assemble a context</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">students</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">)</span><span class="w">
</span><span class="nf">class</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "context"</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="c1">## Activated information in the context:</span><span class="w">
</span><span class="c1">## [1] "items"        "students"     "default.vals"</span><span class="w">

</span><span class="c1"># 2. Magic word number 1: GENERATE!</span><span class="w">
</span><span class="n">poks.data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"poks"</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w">

</span><span class="c1"># 3. Magic word number 2: SYNTHESIZE!</span><span class="w">
</span><span class="n">poks.syn</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">syn</span><span class="p">(</span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"poks"</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poks.data</span><span class="o">$</span><span class="n">poks</span><span class="p">)</span><span class="w">
</span></code></pre></div></div><p>Also, in <code class="highlighter-rouge">gen</code> and <code class="highlighter-rouge">syn</code>, you have the option of specifying argument <code class="highlighter-rouge">n</code> to a postive integer bigger than 1 if you want more than one repetition of the generating/synthesizing process. Setting <code class="highlighter-rouge">progress = TRUE</code> also print out the process of generating data that <code class="highlighter-rouge">gen</code> and <code class="highlighter-rouge">syn</code> followed to finish your order.</p><p>That’s all! Of course there are much more to the capacity of this package but for an introduction, these are just enough. If you insist on knowing all the details, see 1st vignette <a href="https://github.com/thtrieu/edmsyn/blob/master/vignettes/edmsyn.pdf">here</a>. Now that you are familiar with the basic syntax, let’s move on making a toy model and play around with it!</p><h3 id="a-toy-model">A toy model</h3><p>For the purpose of illustration, <code class="highlighter-rouge">toy</code> will operates on some of the built-in parameter of <code class="highlighter-rouge">edmsyn</code>, so I will now briefly go through each of them so that you can follow on to later sections.</p><ul><li><p><code class="highlighter-rouge">concepts</code> and <code class="highlighter-rouge">students</code> are positive integer parameters. Never mind what they really are.</p></li><li><p><code class="highlighter-rouge">min.it.per.tree</code> is also a positive integer parameter, it has a default value of 1</p></li><li><p><code class="highlighter-rouge">M</code> is a binary matrix of size <code class="highlighter-rouge">concepts</code> \( \times \) <code class="highlighter-rouge">students</code></p></li><li><p><code class="highlighter-rouge">default.vals</code> is where the package store all default values, for example: <code class="highlighter-rouge">default.vals$min.it.per.tree</code> has the value of 1. Note that not all parameters have a default value.</p></li></ul><p>Okay, so now here is an outline of what is added to <code class="highlighter-rouge">edmsyn</code> by this new model (named <code class="highlighter-rouge">toy</code>):</p><ul><li><p>a root integer parameter named <code class="highlighter-rouge">foo</code></p></li><li><p>an integer parameter named <code class="highlighter-rouge">lower.foo</code> being the strict lower bound of <code class="highlighter-rouge">foo</code> (i.e. <code class="highlighter-rouge">foo</code> must be greater than <code class="highlighter-rouge">lower.foo</code>), <code class="highlighter-rouge">lower.foo</code> have the default value of 1.</p></li><li><p>an integer parameter named <code class="highlighter-rouge">upper.foo</code> being the upper bound of <code class="highlighter-rouge">foo</code> (i.e. <code class="highlighter-rouge">foo</code> must be less than or equal to <code class="highlighter-rouge">upper.foo</code>), <code class="highlighter-rouge">upper.foo</code> have the default value equal to the sum of default value for <code class="highlighter-rouge">min.it.per.tree</code> and <code class="highlighter-rouge">concepts</code>.</p></li><li><p><code class="highlighter-rouge">bar</code>, a matrix with dimension (<code class="highlighter-rouge">foo</code>,<code class="highlighter-rouge">concepts</code>), its entries being real numbers between 0 and 1.</p></li><li><p>data node of this model (named <code class="highlighter-rouge">toy</code>) is a list with two components: the first one is a matrix obtained from the rounded multiplication of <code class="highlighter-rouge">foo</code> and <code class="highlighter-rouge">M</code>, the second is the number of concepts</p></li></ul><p>Now we are going to add all these parameters and relationships between them into the structure. I call this internal structure a <code class="highlighter-rouge">tree</code> and thus, functions that allow you to do so will have names starting with <code class="highlighter-rouge">edmtree</code>. Base on the specific task that each of them are trying to achieve, these functions will have different name extensions, like <code class="highlighter-rouge">edmtree.add</code>, <code class="highlighter-rouge">edmtree.replace</code>, <code class="highlighter-rouge">edmtree.remove</code>.</p><p>But first let’s gain some background about the internal representation of a parameter within the structure before messing up with them. Let’s just now fetch a random built-in parameter, say <code class="highlighter-rouge">M</code>, from the structure and investigate it.</p><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">M.node</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">edmtree.fetch</span><span class="p">(</span><span class="s1">'M'</span><span class="p">)</span><span class="w">
</span><span class="nf">class</span><span class="p">(</span><span class="n">M.node</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "list"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">M.node</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "tell"   "gen"    "f.tell" "f.gen"</span><span class="w">
</span></code></pre></div></div><p>So, the representation of <code class="highlighter-rouge">M</code> is a list of four components. The first one, <code class="highlighter-rouge">tell</code>, is a set of names of parameters that will receive information if the value of <code class="highlighter-rouge">M</code> is known. The third component, <code class="highlighter-rouge">f.tell</code>, is the function to derive those values from <code class="highlighter-rouge">M</code>. Let’s have a look (in the mean time, review your knowledge about <code class="highlighter-rouge">M</code>, <code class="highlighter-rouge">students</code> and <code class="highlighter-rouge">concepts</code>)</p><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">M.node</span><span class="o">$</span><span class="n">tell</span><span class="w">
</span><span class="c1">## [1] "concepts"    "students"</span><span class="w">

</span><span class="n">M.node</span><span class="o">$</span><span class="n">f.tell</span><span class="w">
</span><span class="c1">## function (x) </span><span class="w">
</span><span class="c1">## {</span><span class="w">
</span><span class="c1">##     list(nrow(x), ncol(x))</span><span class="w">
</span><span class="c1">## }</span><span class="w">
</span><span class="c1">## &lt;environment: 0x4080c70&gt;</span><span class="w">
</span></code></pre></div></div><p>The second component, <code class="highlighter-rouge">gen</code>, is a list of generating methods for <code class="highlighter-rouge">M</code>, each methods is actually a set of names of parameters from which value of <code class="highlighter-rouge">M</code> will be derived. Like <code class="highlighter-rouge">f.tell</code>, <code class="highlighter-rouge">f.gen</code> is a list of functions correspond to each generating method in <code class="highlighter-rouge">gen</code>.</p><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">M.node</span><span class="o">$</span><span class="n">gen</span><span class="w">
</span><span class="c1">## [[1]]</span><span class="w">
</span><span class="c1">## [1] "S"</span><span class="w">
</span><span class="c1">## </span><span class="w">
</span><span class="c1">## [[2]]</span><span class="w">
</span><span class="c1">## [1] "students"    "skill.space" "skill.dist" </span><span class="w">
</span><span class="c1">## </span><span class="w">
</span><span class="c1">## [[3]]</span><span class="w">
</span><span class="c1">## [1] "students"    "concept.exp"</span><span class="w">
</span></code></pre></div></div><p>So, in this example, <code class="highlighter-rouge">edmsyn</code> knows that there are three different methods to reach <code class="highlighter-rouge">M</code>: either using (<code class="highlighter-rouge">S</code>), (<code class="highlighter-rouge">students</code>,<code class="highlighter-rouge">skill.space</code>,<code class="highlighter-rouge">skill.dist</code>), or (<code class="highlighter-rouge">students</code>,<code class="highlighter-rouge">concept.exp</code>). Now it is straightforward from the definition of <code class="highlighter-rouge">f.gen</code> that it must be a list of three components, each being a function. The first one takes <code class="highlighter-rouge">S</code> as input and output <code class="highlighter-rouge">M</code>, the second takes <code class="highlighter-rouge">students</code>, <code class="highlighter-rouge">skill.space</code>, and <code class="highlighter-rouge">skill.dist</code> as input, and so on.</p><p>So that’s it! you are now very well equipped to move on slaying <code class="highlighter-rouge">toy</code>. Ready?</p><h3 id="adding-toy">Adding <code class="highlighter-rouge">toy</code></h3><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># foo is a root node, with no default values</span><span class="w">
</span><span class="n">edmtree.add</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## 'foo' appears to be a root node</span><span class="w">
</span><span class="c1">## 'foo' appears to have no default initialization</span><span class="w">
</span><span class="n">edmtree.add</span><span class="p">(</span><span class="s1">'lower.foo'</span><span class="p">,</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
            </span><span class="n">tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">f.tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">less.strict</span><span class="p">,</span><span class="w">
            </span><span class="n">gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'default.vals'</span><span class="p">,</span><span class="w"> </span><span class="n">f.gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="c1">## 'lower.foo' appears to have a constant default value</span><span class="w">
</span></code></pre></div></div><p><code class="highlighter-rouge">less.strict</code> is a special function provided by edmsyn for cases when you want to tell the structure that <code class="highlighter-rouge">lower.foo</code> should be strictly less than <code class="highlighter-rouge">foo</code>. Alternatively, <code class="highlighter-rouge">edmtree.add.tell('foo', tell = 'lower.foo', f.tell = greater.strict)</code> gives the same effect. There are four such special functions recognised by <code class="highlighter-rouge">edmsyn</code>: <code class="highlighter-rouge">less.equal</code>, <code class="highlighter-rouge">less.strict</code>, <code class="highlighter-rouge">greater.equal</code>, and <code class="highlighter-rouge">greater.strict</code>.</p><p>The presence of these four functions highlighted the fact that inferring information in <code class="highlighter-rouge">edmsyn</code> is not solely inferring values, but can also be inferring different aspects of this value, namely the bound of them in this case.</p><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Now add upper.foo</span><span class="w">
</span><span class="n">edmtree.add</span><span class="p">(</span><span class="s1">'upper.foo'</span><span class="p">,</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
            </span><span class="n">gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'default.vals'</span><span class="p">,</span><span class="w"> </span><span class="s1">'concepts'</span><span class="p">),</span><span class="w">
            </span><span class="n">f.gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">default.vals</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="p">){</span><span class="w">
              </span><span class="nf">return</span><span class="p">(</span><span class="n">default.vals</span><span class="o">$</span><span class="n">min.it.per.tree</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">concepts</span><span class="p">)</span><span class="w">
            </span><span class="p">})</span><span class="w">
</span><span class="c1">## 'upper.foo' appears to be a root node</span><span class="w">
</span><span class="c1">## 'upper.foo' appears to have a default value that relies on at least one run-time values</span><span class="w">
</span><span class="c1"># Another use of special bound function</span><span class="w">
</span><span class="n">edmtree.add.tell</span><span class="p">(</span><span class="s1">'upper.foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'concepts'</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">upper.foo</span><span class="p">){</span><span class="w">
  </span><span class="nf">list</span><span class="p">(</span><span class="n">greater.equal</span><span class="p">(</span><span class="n">upper.foo</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">default</span><span class="p">()</span><span class="o">$</span><span class="n">min.it.per.tree</span><span class="p">))</span><span class="w">
</span><span class="p">})</span><span class="w">
</span><span class="c1">## 'upper.foo' appears to have a default value that relies on at least one run-time values</span><span class="w">
</span><span class="c1"># Instead of upper.foo telling the bound of foo,</span><span class="w">
</span><span class="c1"># we will do it in the opposite direction,</span><span class="w">
</span><span class="c1"># just for the purpose of illustration</span><span class="w">
</span><span class="n">edmtree.add.tell</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'upper.foo'</span><span class="p">,</span><span class="w"> </span><span class="n">f.tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">less.equal</span><span class="p">)</span><span class="w">
</span><span class="c1">## 'foo' appears to have no default initialization</span><span class="w">
</span><span class="c1"># Now since lower.foo and upper.foo are both presented in the structure</span><span class="w">
</span><span class="c1"># it's time to add a generating method for foo</span><span class="w">
</span><span class="n">edmtree.add.gen</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">gen.method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'lower.foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'upper.foo'</span><span class="p">),</span><span class="w">
                </span><span class="n">f.gen.method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">lower.foo</span><span class="p">,</span><span class="w"> </span><span class="n">upper.foo</span><span class="p">){</span><span class="w">
                  </span><span class="n">sample</span><span class="p">((</span><span class="n">lower.foo</span><span class="m">+1</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">upper.foo</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
                </span><span class="p">})</span><span class="w">
</span><span class="c1"># add bar</span><span class="w">
</span><span class="n">edmtree.add</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'concepts'</span><span class="p">),</span><span class="w">
            </span><span class="n">f.gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="p">){</span><span class="w">
              </span><span class="n">matrix</span><span class="p">(</span><span class="n">runif</span><span class="p">(</span><span class="n">foo</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">concepts</span><span class="p">),</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="p">)</span><span class="w">
            </span><span class="p">})</span><span class="w">
</span><span class="c1">## 'bar' appears to be a root node</span><span class="w">
</span><span class="c1"># dimensions of bar are foo and concepts</span><span class="w">
</span><span class="n">edmtree.add.tell</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="n">tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'concepts'</span><span class="p">),</span><span class="w">
                 </span><span class="n">f.tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">bar</span><span class="p">){</span><span class="w">
                   </span><span class="nf">list</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">bar</span><span class="p">),</span><span class="w"> </span><span class="n">ncol</span><span class="p">(</span><span class="n">bar</span><span class="p">))</span><span class="w">
                 </span><span class="p">})</span><span class="w">
</span></code></pre></div></div><p>Note that it is okay not to add the <code class="highlighter-rouge">tell</code> component for <code class="highlighter-rouge">bar</code>, (in fact, it is okay to skip defining <code class="highlighter-rouge">tell</code> and <code class="highlighter-rouge">f.tell</code> in <em>every</em> parameter, your application will still run just fine as long as the rest is properly designed). However doing so will limit the capability of <code class="highlighter-rouge">edmsyn</code> to recognise conflicts (<strong>consistency</strong>, remember?). For example, <code class="highlighter-rouge">pars(bar = matrix(0, 3, 5), concepts = 4)</code> will not raise the conflict between 4 and 5 if <code class="highlighter-rouge">bar$tell</code> does not include the inference for <code class="highlighter-rouge">concepts</code>. Adding <code class="highlighter-rouge">tell</code> and <code class="highlighter-rouge">f.tell</code> is a good practice if you want to add more debugging power to a big and complicated application.</p><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># to make the model a little more sophisticated,</span><span class="w">
</span><span class="c1"># we add another generating method for bar</span><span class="w">
</span><span class="n">edmtree.add.gen</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'M'</span><span class="p">,</span><span class="w"> </span><span class="s1">'foo'</span><span class="p">),</span><span class="w">
                </span><span class="n">f.gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="p">){</span><span class="w">
                  </span><span class="n">concepts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">M</span><span class="p">)</span><span class="w">
                  </span><span class="n">matrix</span><span class="p">(</span><span class="n">runif</span><span class="p">(</span><span class="n">foo</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">concepts</span><span class="p">),</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="p">)</span><span class="w">
                </span><span class="p">})</span><span class="w">
</span><span class="c1"># finally, add the data node "toy"</span><span class="w">
</span><span class="n">edmtree.add</span><span class="p">(</span><span class="s1">'toy'</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
            </span><span class="n">gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="s1">'M'</span><span class="p">),</span><span class="w"> </span><span class="n">f.gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">){</span><span class="w">
              </span><span class="nf">list</span><span class="p">(</span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">bar</span><span class="w"> </span><span class="o">%*%</span><span class="w"> </span><span class="n">M</span><span class="p">),</span><span class="w"> </span><span class="n">concepts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">M</span><span class="p">))</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="n">tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="s1">'M'</span><span class="p">),</span><span class="w"> </span><span class="n">f.tell</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">toy</span><span class="p">){</span><span class="w">
              </span><span class="c1"># Note that the following learning algorithm makes no sense</span><span class="w">
              </span><span class="c1"># it is just for the purpose of illustration</span><span class="w">
              </span><span class="n">concepts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toy</span><span class="o">$</span><span class="n">concepts</span><span class="w">
              </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toy</span><span class="o">$</span><span class="n">R</span><span class="w">
              </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w">
              </span><span class="n">students</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ncol</span><span class="p">(</span><span class="n">R</span><span class="p">)</span><span class="w">
              </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="n">runif</span><span class="p">(</span><span class="n">foo</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">concepts</span><span class="p">),</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="p">)</span><span class="w">
              </span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="n">sample</span><span class="p">(</span><span class="m">0</span><span class="o">:</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">students</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">),</span><span class="w">
                         </span><span class="n">concepts</span><span class="p">,</span><span class="w"> </span><span class="n">students</span><span class="p">)</span><span class="w">
              </span><span class="nf">list</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">)</span><span class="w">
            </span><span class="p">})</span><span class="w">

</span><span class="c1"># Check if ALL.MODELS includes "toy" (yes it does)</span><span class="w">
</span><span class="n">edmconst</span><span class="o">$</span><span class="n">ALL.MODELS</span><span class="w">
</span><span class="c1">##  [1] "exp"     "irt"     "poks"    "dina"    "dino"    "lin.avg" "nmf.con"</span><span class="w">
</span><span class="c1">##  [8] "nmf.dis" "nmf.com" "toy"</span><span class="w">
</span></code></pre></div></div><p>So that’s it! You have successfully installed <code class="highlighter-rouge">toy</code>, now feel free to use your spell (the magic words) whenever you wish to do so ;). Here I will demonstrate a range of test cases to see if the structure is able to do what we want it to do (i.e. generate data, detect inconsistency and insufficiency). Let’s go for it now.</p><h3 id="test-the-model">Test the model</h3><div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 1. Test the bounds</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">lower.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="c1">## Error in down.stream(new.pars): 'foo' violates bound suggested by 'lower.foo'</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">upper.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="c1">## Error in down.stream(new.pars): 'upper.foo' violates bound suggested by 'foo'</span><span class="w">
</span><span class="c1"># This one requires reasoning to detect</span><span class="w">
</span><span class="c1"># Thus error is not raised immediately</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">lower.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">upper.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="c1"># But nevertheless, when p go into use, it immediately fails</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="c1">## Error in down.stream(new.pars): 'upper.foo' violates bound suggested by 'foo'</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">upper.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="c1">## Error in down.stream(new.pars): 'concepts' violates bound suggested by 'upper.foo'</span><span class="w">
</span><span class="c1"># 2. Test foo$gen</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">())</span><span class="w">
</span><span class="c1">## Error in up.stream(target, pars, FALSE, progress): Cannot reach 'foo' since 'concepts' is missing</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">upper.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">)</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="c1">## $value</span><span class="w">
</span><span class="c1">## [1] 14</span><span class="w">
</span><span class="c1">## </span><span class="w">
</span><span class="c1">## $context</span><span class="w">
</span><span class="c1">## Activated information in the context:</span><span class="w">
</span><span class="c1">## [1] "lower.foo"    "upper.foo"    "default.vals" "foo"</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">concepts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Generate foo from c("lower.foo", "upper.foo")</span><span class="w">
</span><span class="c1">## Generate lower.foo from default.vals</span><span class="w">
</span><span class="c1">## Generate upper.foo from c("default.vals", "concepts")</span><span class="w">
</span><span class="c1">## $value</span><span class="w">
</span><span class="c1">## [1] 3</span><span class="w">
</span><span class="c1">## </span><span class="w">
</span><span class="c1">## $context</span><span class="w">
</span><span class="c1">## Activated information in the context:</span><span class="w">
</span><span class="c1">## [1] "concepts"     "default.vals" "lower.foo"    "upper.foo"   </span><span class="w">
</span><span class="c1">## [5] "foo"</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get.par</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Generate foo from c("lower.foo", "upper.foo")</span><span class="w">
</span><span class="c1">## Generate lower.foo from default.vals</span><span class="w">
</span><span class="c1">## Generate upper.foo from c("default.vals", "concepts")</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="c1">## $value</span><span class="w">
</span><span class="c1">## [1] 2</span><span class="w">
</span><span class="c1">## </span><span class="w">
</span><span class="c1">## $context</span><span class="w">
</span><span class="c1">## Activated information in the context:</span><span class="w">
</span><span class="c1">## [1] "M"            "default.vals" "concepts"     "concept.exp" </span><span class="w">
</span><span class="c1">## [5] "students"     "lower.foo"    "upper.foo"    "foo"</span><span class="w">
</span><span class="c1"># 3. Test bar</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">())</span><span class="w">
</span><span class="c1">## Error in up.stream(target, pars, FALSE, progress): Cannot reach 'bar' since 'concepts' is missing</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">upper.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">))</span><span class="w">
</span><span class="c1">## Error in up.stream(target, pars, FALSE, progress): Cannot reach 'bar' since 'concepts' is missing</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">lower.foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Generate bar from c("foo", "concepts")</span><span class="w">
</span><span class="c1">## Generate foo from c("lower.foo", "upper.foo")</span><span class="w">
</span><span class="c1">## Generate upper.foo from c("default.vals", "concepts")</span><span class="w">
</span><span class="c1">## $value</span><span class="w">
</span><span class="c1">##            [,1]      [,2]      [,3]      [,4]       [,5]</span><span class="w">
</span><span class="c1">## [1,] 0.91478540 0.7967258 0.9820101 0.7482440 0.35750742</span><span class="w">
</span><span class="c1">## [2,] 0.02396951 0.4519412 0.1814680 0.8105961 0.01884629</span><span class="w">
</span><span class="c1">## [3,] 0.61441708 0.8048237 0.4863431 0.8290877 0.76060380</span><span class="w">
</span><span class="c1">## [4,] 0.42642887 0.9406059 0.4413696 0.5245509 0.36794982</span><span class="w">
</span><span class="c1">## </span><span class="w">
</span><span class="c1">## $context</span><span class="w">
</span><span class="c1">## Activated information in the context:</span><span class="w">
</span><span class="c1">## [1] "concepts"     "lower.foo"    "default.vals" "upper.foo"   </span><span class="w">
</span><span class="c1">## [5] "foo"          "bar"</span><span class="w">
</span><span class="n">get.par</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">),</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Generate bar from c("foo", "concepts")</span><span class="w">
</span><span class="c1">## Generate foo from c("lower.foo", "upper.foo")</span><span class="w">
</span><span class="c1">## Generate lower.foo from default.vals</span><span class="w">
</span><span class="c1">## Generate upper.foo from c("default.vals", "concepts")</span><span class="w">
</span><span class="c1">## $value</span><span class="w">
</span><span class="c1">##           [,1]       [,2]      [,3]</span><span class="w">
</span><span class="c1">## [1,] 0.6376158 0.41380815 0.3565500</span><span class="w">
</span><span class="c1">## [2,] 0.1967733 0.90072361 0.6833823</span><span class="w">
</span><span class="c1">## [3,] 0.1899659 0.08077038 0.6159836</span><span class="w">
</span><span class="c1">## </span><span class="w">
</span><span class="c1">## $context</span><span class="w">
</span><span class="c1">## Activated information in the context:</span><span class="w">
</span><span class="c1">## [1] "M"            "default.vals" "concepts"     "concept.exp" </span><span class="w">
</span><span class="c1">## [5] "students"     "lower.foo"    "upper.foo"    "foo"         </span><span class="w">
</span><span class="c1">## [9] "bar"</span><span class="w">
</span><span class="c1"># 4. Test data</span><span class="w">
</span><span class="n">toys</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="s1">'toy'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)))</span><span class="w">
</span><span class="c1">## Error in down.stream(new.pars): 'concepts' receives different values at once</span><span class="w">
</span><span class="n">toys</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="s1">'toy'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)),</span><span class="w">
            </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Generate toy from c("bar", "M")</span><span class="w">
</span><span class="n">toys</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="s1">'toy'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">students</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">concepts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">),</span><span class="w"> 
            </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Generate toy from c("bar", "M")</span><span class="w">
</span><span class="c1">## Generate bar from c("foo", "concepts")</span><span class="w">
</span><span class="c1">## Generate foo from c("lower.foo", "upper.foo")</span><span class="w">
</span><span class="c1">## Generate lower.foo from default.vals</span><span class="w">
</span><span class="c1">## Generate upper.foo from c("default.vals", "concepts")</span><span class="w">
</span><span class="c1">## Generate M from c("students", "concept.exp")</span><span class="w">
</span><span class="c1">## Generate concept.exp from concepts</span><span class="w">
</span><span class="n">toys</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="s1">'toy'</span><span class="p">,</span><span class="w"> </span><span class="n">pars</span><span class="p">(</span><span class="n">M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">M</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Generate toy from c("bar", "M")</span><span class="w">
</span><span class="c1">## Generate bar from c("M", "foo")</span><span class="w">
</span><span class="c1">## Generate foo from c("lower.foo", "upper.foo")</span><span class="w">
</span><span class="c1">## Generate lower.foo from default.vals</span><span class="w">
</span><span class="c1">## Generate upper.foo from c("default.vals", "concepts")</span><span class="w">
</span><span class="n">toys.syn</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">syn</span><span class="p">(</span><span class="s1">'toy'</span><span class="p">,</span><span class="w"> </span><span class="n">toys</span><span class="p">[[</span><span class="m">2</span><span class="p">]]</span><span class="o">$</span><span class="n">toy</span><span class="p">,</span><span class="w">
                </span><span class="n">keep.pars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">,</span><span class="s2">"concept.exp"</span><span class="p">),</span><span class="w">
                </span><span class="n">students</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">## Learning by 'toy' ...</span><span class="w">
</span><span class="c1">## Generate toy from c("bar", "M")</span><span class="w">
</span><span class="c1">## Generate bar from c("foo", "concepts")</span><span class="w">
</span><span class="c1">## Generate M from c("students", "concept.exp")</span><span class="w">
</span></code></pre></div></div><h3 id="you-have-not-seen-everything">You have not seen everything</h3><p>See, <code class="highlighter-rouge">edmtree.add</code> is all that we used in the above illustration. There are much more to that as mentioned earlier: <code class="highlighter-rouge">edmtree.replace</code>, <code class="highlighter-rouge">edmtree.remove</code>, and even <code class="highlighter-rouge">edmtree.dump</code>, <code class="highlighter-rouge">edmtree.load</code>, <code class="highlighter-rouge">edmtree.clear</code> that helps you save, load and remove the whole current tree (big deal, the built-in tree has 62 parameters, hundreds of connections, 11 models!). These are covered in detailed in the 2nd vignette <a href="https://github.com/thtrieu/edmsyn/blob/master/vignettes/advancedVignette.pdf">here</a>.</p><p>I assume now that you’ve got everything you need to play around with the tree. Whenever in trouble, simply spell <code class="highlighter-rouge">edmtree.load()</code> to reverse everything back to the built-in tree, or even <code class="highlighter-rouge">edmtree.clear()</code> to wipe out everything and start out from scratch as you please (betcha like this one if EDM is a complete new thing to you). If these are too heavy operations, again there are intermediate, lighter operations like <code class="highlighter-rouge">emdtree.replace</code> and <code class="highlighter-rouge">edmtree.remove</code> to modify a part of the tree, or even a part of a single node. And they are very well documented in the 2nd vignette of <code class="highlighter-rouge">edmsyn</code>.</p><p>Good luck!</p><p>&nbsp;</p><p></p><div class = "divider"></div><div class = "center-foot"><h1 id = "share"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://thtrieu.github.io/notes/project-update-r-edmsyn-20" target = "_blank"><img src="http://i.imgur.com/Q9Dr6XJ.png (linkedin icon with padding)" alt="alt text" /></a>     <a href="https://twitter.com/intent/tweet/?text=Educational Data Synthesizer - edmsyn the second part&url=https://thtrieu.github.io/notes/project-update-r-edmsyn-20" target = "_blank"><img src="http://i.imgur.com/phnE5v0.png (twitter icon with padding)" alt="alt text" /></a>     <a href="https://plus.google.com/share?url=https://thtrieu.github.io/notes/project-update-r-edmsyn-20" target = "_blank"><img src="http://i.imgur.com/PeridnP.png (google plus icon with padding)" alt="alt text" /></a>     <a href="https://facebook.com/sharer/sharer.php?u=https://thtrieu.github.io/notes/project-update-r-edmsyn-20" target = "_blank"><img src="http://i.imgur.com/GRvQu92.png (facebook icon with padding)" alt="alt text" /></a>     <a href="mailto:?subject=Educational Data Synthesizer - edmsyn the second part&body=https://thtrieu.github.io/notes/project-update-r-edmsyn-20"><img src="http://i.imgur.com/CKLpgcs.png (email icon with padding)" alt="alt text" /></a></h1></div><aside class="back"> <a href="/notes/r-environment-and-scope-modify-list-of-funcs">&laquo; Scopes, environments, locked bindings, modify list of functions</a></aside><aside class="next"> <a href="/notes/Invariances-and-people-of-the-circle">Invariances of N people (with balls) running around in circle &raquo;</a></aside><p>&nbsp;</p><p></p><div id="disqus_thread"></div><script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ var disqus_config = function () { this.page.url = 'https://thtrieu.github.io/notes/project-update-r-edmsyn-20'; this.page.identifier = 'https://thtrieu.github.io/notes/project-update-r-edmsyn-20'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//thtrieu.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); }) (); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></article></main></body><script> var that = 'http://i.imgur.com/tU08Pu4.gif'; var thiS = 'http://i.imgur.com/tU08Pu4.gif'; var sub = 'http://i.imgur.com/w6NOJp2.gif'; var but = 'http://i.imgur.com/w6NOJp2.gif'; function postLogo() { document.getElementById("logo").src = 'http://i.imgur.com/tU08Pu4.gif'; } function thatLogo() { document.getElementById("logo").src = that; } function thisLogo() { document.getElementById("logo").src = thiS; } function subLogo() { document.getElementById("logo").src = sub; } function buttonLogo() { document.getElementById("logo").src = but; } function postClicked() { thiS = 'http://i.imgur.com/tU08Pu4.gif'; } function clicked() { thiS = that; } </script></html>